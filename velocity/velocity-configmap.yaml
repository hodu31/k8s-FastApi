apiVersion: v1
kind: ConfigMap
metadata:
  name: velocity-config
  namespace: minecraft-servers
data:
  velocity.toml: |
    config-version = "2.7"
    
    bind = "0.0.0.0:25577"
    
    motd = "&3Minecraft Server Network"
    
    show-max-players = 500
    
    online-mode = false
    
    player-info-forwarding-mode = "MODERN"
    
    # CI/CD 파이프라인에서 이 값은 실제 시크릿으로 대체되어야 합니다.
    # 예: sed -i "s/VELOCITY_FORWARDING_SECRET_PLACEHOLDER/${VELOCITY_SECRET}/g" velocity-configmap.yaml
    forwarding-secret = "VELOCITY_FORWARDING_SECRET_PLACEHOLDER"
    
    [servers]
    
    try = []
    
    [forced-hosts]
    
    [advanced]
    compression-threshold = 256
    compression-level = -1
    connection-timeout = 5000
    read-timeout = 30000
    proxy-protocol = false
    
    [query]
    enabled = false
    port = 25577