apiVersion: apps/v1
kind: Deployment
metadata:
  name: pause-pods-overprovisioning
  namespace: minecraft-servers  # 마인크래프트 서버가 뜨는 네임스페이스와 동일하게 설정
spec:
  # 예비로 확보하고 싶은 "서버 개수"만큼 replicas를 설정하세요.
  # 예를 들어, 노드 1개 분량을 미리 잡아두고 싶다면 그에 맞춰 개수를 늘리세요.
  replicas: 1
  selector:
    matchLabels:
      app: pause-pod
  template:
    metadata:
      labels:
        app: pause-pod
    spec:
      # 정의해둔 낮은 우선순위 클래스 적용 (핵심!)
      priorityClassName: low-priority-pause
      
      # 쫓겨날 때 우아하게 종료될 필요 없이 즉시 사라지게 설정 (빠른 공간 확보)
      terminationGracePeriodSeconds: 0
      
      containers:
      - name: pause
        # 아무 일도 하지 않고 자원만 점유하는 초경량 이미지
        image: registry.k8s.io/pause:3.9
        resources:
          requests:
            # [중요] 확보해두고 싶은 자원 크기
            # 마인크래프트 서버 1개가 사용하는 크기와 비슷하게 잡는 것이 계산하기 편합니다.
            cpu: "2"     # 2 코어
            memory: "3Gi"   # 3GB